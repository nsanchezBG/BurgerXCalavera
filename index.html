<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Casados x El Hambre - Web App</title>
    
    <!-- GOOGLE ANALYTICS 4 (GA4) -->
    <!-- REEMPLAZA 'G-XXXXXXXXXX' CON TU ID DE MEDICI√ìN REAL -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      // Configuraci√≥n inicial
      gtag('config', 'G-XXXXXXXXXX', {
        'send_page_view': false 
      });
    </script>
    <!-- FIN GOOGLE ANALYTICS -->

    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel para compilar JSX en el navegador -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Road+Rage&family=Oswald:wght@400;700&display=swap" rel="stylesheet">

    <style>
        /* Fuentes personalizadas */
        .font-road-rage { font-family: 'Road Rage', cursive; }
        .font-oswald { font-family: 'Oswald', sans-serif; }
        
        /* Animaciones */
        .animate-pulse-fast {
            animation: pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }

        .animate-shake {
            animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: .7; transform: scale(0.95); }
        }

        @keyframes shake {
            10%, 90% { transform: translate3d(-1px, 0, 0); }
            20%, 80% { transform: translate3d(2px, 0, 0); }
            30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
            40%, 60% { transform: translate3d(4px, 0, 0); }
        }

        /* Scrollbar personalizada */
        .custom-scrollbar::-webkit-scrollbar {
            width: 4px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #fff;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #000;
        }
    </style>
</head>
<body class="bg-black overflow-hidden"> <!-- Prevent body scroll -->
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useRef, useEffect } = React;

        // --- FUNCI√ìN HELPER PARA ANALYTICS ---
        const trackEvent = (eventName, params = {}) => {
            if (typeof window.gtag === 'function') {
                window.gtag('event', eventName, params);
                console.log(`üì° GA4 Event: ${eventName}`, params);
            } else {
                console.log(`üì° GA4 Event (Simulado - falta ID): ${eventName}`, params);
            }
        };

        // --- ICONOS SVG ---
        const ArrowRight = ({ size = 24, ...props }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></svg>
        );
        const ChevronUp = ({ size = 24, ...props }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="m18 15-6-6-6 6"/></svg>
        );
        const Download = ({ size = 24, ...props }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" x2="12" y1="15" y2="3"/></svg>
        );
        const RefreshCcw = ({ size = 24, ...props }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"/><path d="M16 16h5v5"/></svg>
        );
        const ShareIcon = ({ size = 24, ...props }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"/><polyline points="16 6 12 2 8 6"/><line x1="12" x2="12" y1="2" y2="15"/></svg>
        );
        const AlertTriangle = ({ size = 24, ...props }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
        );

        // --- ASSETS & CONFIG ---
        const ASSETS = {
            isotipo: "https://raw.githubusercontent.com/nsanchezBG/BurgerXCalavera/main/calaveraboyRecurso%202.png",
            logoTexto: "https://raw.githubusercontent.com/nsanchezBG/BurgerXCalavera/main/calaveraboytxtRecurso%203.png",
            logosFooter: "https://raw.githubusercontent.com/nsanchezBG/BurgerXCalavera/main/logosfooterRecurso%203.png",
            overlay: "https://raw.githubusercontent.com/nsanchezBG/BurgerXCalavera/main/overlayRecurso%205.png",
            grunge: "https://raw.githubusercontent.com/nsanchezBG/BurgerXCalavera/main/Texturelabs_Grunge_120S.jpg",
            poweredBy: "https://github.com/nsanchezBG/BurgerXCalavera/blob/main/poweredbyBG.png?raw=true"
        };

        const QUOTES = [
            "Hasta que la cuenta nos separe.",
            "Prometo no revisar tu celular mientras est√°s en el ba√±o.",
            "Matrimonio v√°lido hasta terminar de comer.",
            "El hambre nos uni√≥.",
            "Ni la digesti√≥n nos separar√°.",
            "P√≠deme todo menos que te invite.",
            "Juntos en la salud y en la bajona.",
            "S√≠, acepto... que pagues t√∫.",
            "Prometo serte fiel hasta que llegue el postre.",
            "Juntos hasta que se acabe la promo.",
            "Casados bajo el r√©gimen de platos separados.",
            "Juntos, pero con platos separados.",
            "Unidos por el sagrado v√≠nculo del queso derretido."
        ];

        // --- COMPONENTS ---
        
        // Componente para el footer "Powered by BrandGeeks"
        const PoweredBy = () => (
            <div className="w-full flex justify-center mt-3 z-20 relative">
                <a href="https://brandgeeks.pe" target="_blank" rel="noopener noreferrer" className="opacity-80 hover:opacity-100 transition-opacity block">
                    <img src={ASSETS.poweredBy} alt="Powered by BrandGeeks" className="h-4 object-contain" /> 
                </a>
            </div>
        );

        // --- APP COMPONENT ---
        function App() {
            // STEP MAPPING:
            // 1: Splash
            // 2: INSTRUCTIONS + TERMS (Checkbox here)
            // 3: Marriage Names
            // 4: Camera
            // 5: Result
            const [step, setStep] = useState(1);
            const [showTerms, setShowTerms] = useState(false);
            const [termsAccepted, setTermsAccepted] = useState(false); 
            const [formError, setFormError] = useState('');
            const [couple, setCouple] = useState({ p1: '', p2: '' });
            const [capturedImage, setCapturedImage] = useState(null);
            const [randomQuote, setRandomQuote] = useState('');
            const [isSharing, setIsSharing] = useState(false);
            
            // Refs
            const videoRef = useRef(null);
            const canvasRef = useRef(null);
            const overlayImageRef = useRef(null);
            const grungeImageRef = useRef(null);
            const [stream, setStream] = useState(null);

            // --- TRACKING DROP-OUTS & SESSIONS ---
            useEffect(() => {
                const stepNames = {
                    1: '01_Splash',
                    2: '02_Mecanica',
                    3: '03_Nombres',
                    4: '04_Camara',
                    5: '05_Resultado'
                };

                const currentStepName = stepNames[step];

                trackEvent('view_step', {
                    step_number: step,
                    step_name: currentStepName
                });

                if (step === 1) {
                    trackEvent('app_session_start', {
                        description: 'Usuario abri√≥ la app en Splash'
                    });
                }
            }, [step]);

            // --- PRELOAD ASSETS ---
            useEffect(() => {
                const img = new Image();
                img.crossOrigin = "anonymous";
                img.src = ASSETS.overlay;
                img.onload = () => { overlayImageRef.current = img; };
                
                const grunge = new Image();
                grunge.crossOrigin = "anonymous";
                grunge.src = ASSETS.grunge;
                grunge.onload = () => { grungeImageRef.current = grunge; };
            }, []);

            // --- CAMERA & CANVAS HANDLERS ---
            const startCamera = async () => {
                try {
                    const constraints = {
                        video: { 
                            facingMode: 'user',
                            width: { ideal: 1920 }, 
                            height: { ideal: 1080 },
                            aspectRatio: { ideal: 9/16 }
                        },
                        audio: false
                    };
                    const mediaStream = await navigator.mediaDevices.getUserMedia(constraints);
                    setStream(mediaStream);
                    setTimeout(() => {
                         if (videoRef.current) videoRef.current.srcObject = mediaStream;
                    }, 100);
                } catch (err) {
                    console.error("Error:", err);
                    alert("No pudimos acceder a la c√°mara. Verifica los permisos.");
                }
            };

            const stopCamera = () => {
                if (stream) {
                    stream.getTracks().forEach(track => track.stop());
                    setStream(null);
                }
            };

            const drawImageContain = (ctx, img, canvasWidth, canvasHeight) => {
                if (!img || img.naturalWidth === 0) return;
                const imgRatio = img.width / img.height;
                const canvasRatio = canvasWidth / canvasHeight;
                let renderWidth, renderHeight, offsetX, offsetY;
                if (imgRatio < canvasRatio) {
                    renderHeight = canvasHeight;
                    renderWidth = img.width * (canvasHeight / img.height);
                    offsetX = (canvasWidth - renderWidth) / 2;
                    offsetY = 0;
                } else {
                    renderWidth = canvasWidth;
                    renderHeight = img.height * (canvasWidth / img.width);
                    offsetX = 0;
                    offsetY = (canvasHeight - renderHeight) / 2;
                }
                ctx.drawImage(img, offsetX, offsetY, renderWidth, renderHeight);
            };
            
            const drawImageCover = (ctx, img, canvasWidth, canvasHeight) => {
                if (!img || img.naturalWidth === 0) return;
                const imgRatio = img.width / img.height;
                const canvasRatio = canvasWidth / canvasHeight;
                let renderWidth, renderHeight, offsetX, offsetY;
                if (imgRatio < canvasRatio) { 
                    renderWidth = canvasWidth;
                    renderHeight = img.height * (canvasWidth / img.width);
                    offsetX = (canvasWidth - renderWidth) / 2;
                    offsetY = 0;
                } else { 
                    renderHeight = canvasHeight;
                    renderWidth = img.width * (canvasHeight / img.height);
                    offsetX = (canvasWidth - renderWidth) / 2;
                    offsetY = 0;
                }
                ctx.drawImage(img, offsetX, offsetY, renderWidth, renderHeight);
            }

            function wrapText(context, text, x, y, maxWidth, lineHeight) {
                const words = text.split(' ');
                let line = '';
                for(let n = 0; n < words.length; n++) {
                    const testLine = line + words[n] + ' ';
                    const metrics = context.measureText(testLine);
                    const testWidth = metrics.width;
                    if (testWidth > maxWidth && n > 0) {
                        context.fillText(line, x, y);
                        line = words[n] + ' ';
                        y += lineHeight;
                    } else {
                        line = testLine;
                    }
                }
                context.fillText(line, x, y);
            }

            const handleCapture = () => {
                if (!videoRef.current || !canvasRef.current) return;
                const overlayImg = overlayImageRef.current;
                const grungeImg = grungeImageRef.current;

                try {
                    const video = videoRef.current;
                    const canvas = canvasRef.current;
                    const context = canvas.getContext('2d');
                    const width = video.videoWidth;
                    const height = video.videoHeight;
                    
                    canvas.width = width;
                    canvas.height = height;

                    // 1. Video
                    context.filter = 'saturate(50%) contrast(110%)';
                    context.translate(width, 0);
                    context.scale(-1, 1); 
                    context.drawImage(video, 0, 0, width, height);
                    context.setTransform(1, 0, 0, 1, 0, 0); 
                    context.filter = 'none';

                    // 2. Grunge (Invert + Multiply)
                    if (grungeImg && grungeImg.complete) {
                        context.save();
                        context.filter = 'invert(1)'; 
                        context.globalCompositeOperation = 'multiply';
                        context.globalAlpha = 0.5;
                        drawImageCover(context, grungeImg, width, height);
                        context.restore();
                    }

                    // 3. Overlay
                    if (overlayImg && overlayImg.complete) {
                        drawImageContain(context, overlayImg, width, height);
                    }

                    // 4. Texto (Sin sombra)
                    context.font = 'bold 80px "Road Rage"';
                    context.fillStyle = '#FFFFFF';
                    context.textAlign = 'center';
                    context.shadowBlur = 0; 
                    context.shadowColor = 'transparent';
                    const textY = height * 0.30; 
                    context.fillText(`${couple.p1.toUpperCase()} Y ${couple.p2.toUpperCase()}`, width / 2, textY);

                    // 5. Frase (Road Rage, Abajo)
                    const quote = QUOTES[Math.floor(Math.random() * QUOTES.length)];
                    setRandomQuote(quote);
                    context.font = 'bold 55px "Road Rage"';
                    const quoteY = height * 0.85; 
                    wrapText(context, `"${quote}"`, width / 2, quoteY, width * 0.8, 60);

                    const dataUrl = canvas.toDataURL('image/png');
                    setCapturedImage(dataUrl);
                    stopCamera();
                    
                    trackEvent('photo_captured', {
                        quote_selected: quote
                    });

                    setStep(5);
                } catch (e) {
                    console.error("Error photo:", e);
                    alert("Error al procesar la imagen.");
                }
            };

            const shareOrDownloadPhoto = async () => {
                trackEvent('conversion_complete', {
                    method: isSharing ? 'share_api' : 'download_fallback',
                    couple_names: `${couple.p1} & ${couple.p2}`
                });

                if (!capturedImage) return;
                setIsSharing(true);
                try {
                    const response = await fetch(capturedImage);
                    const blob = await response.blob();
                    const file = new File([blob], `CasadosXElHambre_${couple.p1}_${couple.p2}.png`, { type: 'image/png' });

                    if (navigator.share && navigator.canShare && navigator.canShare({ files: [file] })) {
                        await navigator.share({
                            files: [file],
                            title: 'Casados x El Hambre',
                            text: `¬°Nos casamos por el hambre!`,
                        });
                    } else {
                        const link = document.createElement('a');
                        link.href = capturedImage;
                        link.download = `CasadosXElHambre_${couple.p1}_${couple.p2}.png`;
                        document.body.appendChild(link);
                        link.click();
                        document.body.removeChild(link);
                        if (/iPhone|iPad|iPod/i.test(navigator.userAgent)) alert("Imagen descargada. Revisa 'Archivos'.");
                    }
                } catch (error) {
                    if (error.name !== 'AbortError') alert("No pudimos compartir. Intenta guardar manualmente.");
                } finally {
                    setIsSharing(false);
                }
            };

            // --- NAVIGATION ---
            const goToMechanics = () => setStep(2);
            
            const submitMechanics = () => {
                setFormError('');
                if (!termsAccepted) {
                    setFormError('Debes aceptar los t√©rminos y condiciones.');
                    trackEvent('error_validation', {
                        step: '02_Mecanica',
                        message: 'Terminos no aceptados'
                    });
                    return;
                }
                setStep(3);
            };

            const submitMarriage = (e) => {
                e.preventDefault();
                if(couple.p1 && couple.p2) {
                    setStep(4);
                    startCamera();
                }
            };

            const repeatPhoto = () => {
                setCapturedImage(null);
                setStep(4);
                startCamera();
                trackEvent('photo_retake', {
                    from_step: '05_Resultado'
                });
            };

            // --- RENDERING ---

            // 1. SPLASH
            if (step === 1) {
                return (
                    <div onClick={goToMechanics} className="h-[100dvh] w-full bg-white flex flex-col items-center justify-between py-6 px-4 cursor-pointer relative overflow-hidden font-oswald animate-[fadeIn_0.7s_ease-in]">
                        <div className="flex-1 flex flex-col items-center justify-center space-y-8 w-full z-10">
                            <img src={ASSETS.isotipo} alt="Calavera" className="w-24 md:w-32 drop-shadow-xl" />
                            <div className="text-center space-y-2 animate-pulse-fast">
                                <h1 className="text-6xl md:text-8xl font-road-rage text-black uppercase leading-[0.8]">TOCA<br/>LA<br/>PANTALLA</h1>
                            </div>
                        </div>
                        <div className="w-full max-w-xs z-10 flex flex-col items-center pb-4">
                            <img src={ASSETS.logosFooter} alt="Logos Footer" className="w-full opacity-90" />
                            <PoweredBy />
                        </div>
                    </div>
                );
            }

            // 2. MECHANICS + TERMS
            if (step === 2) {
                return (
                    <div className="h-[100dvh] w-full bg-white relative flex flex-col font-oswald overflow-hidden">
                        <div className={`h-full flex flex-col items-center px-4 py-2 transition-all duration-500 ${showTerms ? 'blur-md brightness-75 scale-95' : ''}`}>
                            <div className="flex-none flex flex-col items-center mb-2 w-full max-w-xs pt-2">
                                <img src={ASSETS.isotipo} alt="Icon" className="w-14 mb-1" />
                                <div className="w-32">
                                    <img src={ASSETS.logoTexto} alt="Casados x El Hambre" className="w-full" />
                                </div>
                            </div>

                            <div className="flex-1 w-full max-w-sm flex flex-col items-center justify-center space-y-2 min-h-0">
                                <div className="bg-black text-white font-road-rage text-3xl px-4 py-1 transform -rotate-1 mb-3 text-center w-full shadow-lg">
                                    PASOS PARA PARTICIPAR
                                </div>

                                <div className="w-full space-y-2 px-1">
                                    <div className="flex items-center space-x-3">
                                        <div className="flex-none w-10 h-10 bg-black text-white flex items-center justify-center font-road-rage text-2xl pt-1 shadow-md">1</div>
                                        <p className="font-road-rage text-xl md:text-2xl leading-none uppercase pt-1">PONGAN SUS NOMBRES Y ACEPTEN EL COMPROMISO.</p>
                                    </div>
                                    <div className="flex items-center space-x-3">
                                        <div className="flex-none w-10 h-10 bg-black text-white flex items-center justify-center font-road-rage text-2xl pt-1 shadow-md">2</div>
                                        <p className="font-road-rage text-xl md:text-2xl leading-none uppercase pt-1">T√ìMENSE LA FOTO ‚ÄúOFICIAL‚Äù DEL MATRI.</p>
                                    </div>
                                    <div className="flex items-center space-x-3">
                                        <div className="flex-none w-10 h-10 bg-black text-white flex items-center justify-center font-road-rage text-2xl pt-1 shadow-md">3</div>
                                        <div className="font-road-rage text-xl md:text-2xl leading-none uppercase pt-1">
                                            S√öBANLA A STORIES ETIQUETANDO A <br/>
                                            <span className="bg-black text-white px-1 mt-1 inline-block">@BURGERBOYPE</span> + <span className="bg-black text-white px-1 mt-1 inline-block">@CALAVERA.PIZZERIA</span>
                                        </div>
                                    </div>
                                </div>

                                <div className="w-full pt-4 flex flex-col items-center">
                                    <div className="flex items-center space-x-3 cursor-pointer" onClick={() => { setTermsAccepted(!termsAccepted); setFormError(''); }}>
                                        <div className={`w-6 h-6 border-2 border-black flex-none flex items-center justify-center transition-colors ${termsAccepted ? 'bg-black' : 'bg-white'}`}>
                                            {termsAccepted && <div className="w-3 h-3 bg-white" />}
                                        </div>
                                        <span className="font-oswald font-bold text-base leading-tight pt-1 uppercase">Acepto los t√©rminos y condiciones.</span>
                                    </div>
                                    <button type="button" onClick={() => setShowTerms(true)} className="mt-2 text-xs font-bold opacity-80 hover:opacity-100 underline cursor-pointer uppercase tracking-wider">Ver t√©rminos y condiciones</button>
                                    {formError && (
                                        <div className="flex items-center space-x-1 text-red-600 mt-2 text-sm font-bold animate-shake">
                                            <AlertTriangle size={16} />
                                            <span>{formError}</span>
                                        </div>
                                    )}
                                </div>

                                <div className="pt-2 w-full flex justify-center">
                                    <button onClick={submitMechanics} className="bg-black text-white font-road-rage text-4xl px-8 py-2 hover:scale-105 transition-transform shadow-[4px_4px_0px_0px_rgba(0,0,0,0.2)]">OK, VAMOS</button>
                                </div>
                            </div>
                            <div className="flex-none w-full max-w-xs pb-2 pt-2 flex flex-col items-center">
                                <img src={ASSETS.logosFooter} alt="Logos" className="w-full" />
                                <PoweredBy />
                            </div>
                        </div>

                        {/* TERMS MODAL ACTUALIZADO */}
                        {showTerms && (
                            <div className="absolute inset-0 z-50 flex items-center justify-center px-4 animate-[zoomIn_0.3s_ease-out]">
                                <div className="bg-black text-white p-6 w-full max-w-md border-4 border-white shadow-2xl relative h-[70vh] flex flex-col">
                                    <h2 className="font-road-rage text-4xl text-center mb-4 text-white uppercase">Legales</h2>
                                    <div className="flex-1 overflow-y-auto pr-2 text-sm text-gray-300 space-y-4 font-sans leading-relaxed custom-scrollbar text-justify">
                                        
                                        <h3 className="font-bold text-white text-lg uppercase">Pol√≠tica de Privacidad</h3>
                                        <p><strong>Aceptaci√≥n:</strong> Al participar en la campa√±a ‚ÄúCasados x El Hambre‚Äù, aceptas los presentes t√©rminos y condiciones y autorizas el uso de tu imagen para fines promocionales de Burgerboy y Calavera.</p>
                                        <p><strong>Uso de imagen:</strong> Autorizo a las marcas a repostear, difundir y comunicar la fotograf√≠a generada en sus redes sociales y medios digitales.</p>
                                        <p><strong>Car√°cter de la campa√±a:</strong> Esta es una campa√±a promocional de entretenimiento y no constituye un sorteo ni genera derechos de car√°cter civil.</p>
                                        <p><strong>Datos personales:</strong> No se recopilan datos personales sensibles. √önicamente se genera la imagen bajo consentimiento del participante.</p>

                                        <hr className="border-gray-600 my-4"/>

                                        <h3 className="font-bold text-white text-lg uppercase">T√©rminos y Condiciones</h3>
                                        <p className="italic">PROMOCI√ìN CASADOS X EL HAMBRE - BURGERBOY x CALAVERA</p>
                                        
                                        <p>La presente promoci√≥n es organizada por BURGERBOY S.A.C. (en adelante, BURGERBOY), identificada con RUC 20608099451, con domicilio en Calle Jun√≠n 142 Ofc. 206, Miraflores; y por CALAVERA PIZZA JOINT S.A.C. (en adelante, CALAVERA), identificada con RUC 20613405365, con domicilio en Calle Jun√≠n 142 Ofc. 206, Miraflores.</p>
                                        
                                        <p>La participaci√≥n en la promoci√≥n implica el total conocimiento y aceptaci√≥n de los presentes t√©rminos y condiciones. El incumplimiento de cualquiera de las disposiciones aqu√≠ establecidas podr√° dar lugar a la no aplicaci√≥n del beneficio.</p>

                                        <h4 className="font-bold text-white mt-2">1. Objetivo de la promoci√≥n</h4>
                                        <p>La promoci√≥n ‚ÄúCasados x El Hambre‚Äù tiene como finalidad brindar un 25% de descuento en una compra, v√°lida para consumo en sal√≥n y pickup, a los participantes que cumplan con la mec√°nica establecida durante la fecha de vigencia.</p>

                                        <h4 className="font-bold text-white mt-2">2. Vigencia de la promoci√≥n</h4>
                                        <p>La promoci√≥n ser√° v√°lida √∫nicamente el s√°bado 14 de febrero de 2026, durante el horario de atenci√≥n de cada local participante o hasta agotar stock.</p>

                                        <h4 className="font-bold text-white mt-2">3. Mec√°nica de la promoci√≥n</h4>
                                        <p>Para acceder al beneficio, los participantes deber√°n cumplir con los siguientes pasos:</p>
                                        <ul className="list-disc pl-5 space-y-1">
                                            <li>Ingresar a la aplicaci√≥n digital habilitada para la promoci√≥n, a trav√©s del enlace o c√≥digo QR disponible en el local y en las redes sociales.</li>
                                            <li>Aceptar los presentes t√©rminos y condiciones.</li>
                                            <li>Ingresar los nombres de ambos participantes.</li>
                                            <li>Utilizar la aplicaci√≥n para tomarse una fotograf√≠a, en la cual deber√°n aparecer √∫nicamente los dos (2) participantes.</li>
                                            <li>Compartir la fotograf√≠a generada como story en Instagram, etiquetando a @burgerboy.pe y @calavera.pizzeria.</li>
                                            <li>Mostrar la story publicada al personal de caja del local donde se realizar√° el consumo.</li>
                                        </ul>
                                        <p className="mt-2">El beneficio es v√°lido por una (1) story, aplicable a una (1) sola compra.</p>
                                        <p>La promoci√≥n es v√°lida √∫nicamente para consumo en sal√≥n. No aplica para delivery ni pedidos para llevar.</p>

                                        <h4 className="font-bold text-white mt-2">4. Condiciones del beneficio</h4>
                                        <ul className="list-disc pl-5 space-y-1">
                                            <li>El descuento es del 25% sobre el consumo realizado en una sola compra.</li>
                                            <li>El beneficio podr√° ser redimido indistintamente en Burgerboy o Calavera, en el local que el participante elija. √önicamente v√°lido para consumo en el local o pickup en los locales participantes.</li>
                                            <li>No aplica para delivery.</li>
                                            <li>Aplica para todo el men√∫, excepto bebidas alcoh√≥licas.</li>
                                            <li>El descuento no es acumulable con otras promociones, descuentos u ofertas vigentes.</li>
                                            <li>El beneficio es personal, no transferible y no canjeable por dinero en efectivo.</li>
                                            <li>El beneficio estar√° sujeto a la disponibilidad de stock de los productos en cada local participante, el cual es limitado y podr√° agotarse en su totalidad.</li>
                                            <li>El beneficio estar√° disponible hasta durante el horario de atenci√≥n del local y hasta agotar stock.</li>
                                        </ul>

                                        <h4 className="font-bold text-white mt-2">5. Locales participantes</h4>
                                        
                                        <p className="font-bold mt-1">Burgerboy</p>
                                        <p className="underline">Participan:</p>
                                        <ul className="list-disc pl-5">
                                            <li>Burgerboy Larco - Av. Jos√© Larco 1158, Miraflores.</li>
                                            <li>Burgerboy La Mar - Calle Jos√© Domingo Choquehuanca 411, Miraflores.</li>
                                            <li>Burgerboy Surco - El Polo 695, Local 18, CC Urban Plaza (2do piso).</li>
                                            <li>Burgerboy Surquillo - Lizardo Montero 1100 (solo para pickup).</li>
                                        </ul>
                                        <p className="underline mt-1">No participa:</p>
                                        <ul className="list-disc pl-5">
                                            <li>Burgerboy Aeropuerto (Zona Internacional).</li>
                                        </ul>

                                        <p className="font-bold mt-2">Calavera</p>
                                        <p className="underline">Participan:</p>
                                        <ul className="list-disc pl-5">
                                            <li>Calavera La Mar - Av. Mariscal La Mar 1127, Miraflores.</li>
                                            <li>Calavera El Polo - El Polo 695, Local 22, 2do piso, CC Urban Plaza El Polo.</li>
                                        </ul>
                                        <p className="mt-2">La promoci√≥n se encuentra sujeta al horario de atenci√≥n de cada local o hasta agotar stock.</p>

                                        <h4 className="font-bold text-white mt-2">6. Reserva de derechos</h4>
                                        <p>BURGERBOY y CALAVERA se reservan el derecho de modificar, suspender o cancelar la promoci√≥n por causas de fuerza mayor o caso fortuito, as√≠ como de invalidar la participaci√≥n de quienes no cumplan con los presentes t√©rminos o realicen acciones indebidas o fraudulentas.</p>

                                        <h4 className="font-bold text-white mt-2">7. Protecci√≥n de datos personales</h4>
                                        <p>En cumplimiento de la Ley N¬∞ 29733, Ley de Protecci√≥n de Datos Personales, y su Reglamento, todos los participantes autorizan expresamente a BURGERBOY y CALAVERA, sus cesionarios, continuadores legales y causahabientes, para tratar los datos personales que pudieran ser proporcionados en el marco de la presente promoci√≥n, quedando BURGERBOY y CALAVERA facultados para realizar cualquier operaci√≥n o conjunto de operaciones o procedimientos t√©cnicos, de car√°cter automatizado o no, que permitan recolectar, almacenar, grabar, organizar, elaborar, seleccionar, extraer, confrontar, interconectar, disociar, comunicar, ceder, transferir, transmitir o cancelar dichos datos, o utilizarlos en cualquier otra forma. Asimismo, autorizan a BURGERBOY y CALAVERA a delegar la presente autorizaci√≥n, por lo que podr√°n efectuar dicho tratamiento mediante terceros sujetos a un mandato, contrato de trabajo u otras formas contractuales.</p>
                                        <p>El tratamiento de los datos mencionados tendr√° como finalidad exclusiva: (a) gestionar la participaci√≥n del usuario en la promoci√≥n, (b) validar el cumplimiento de la mec√°nica establecida, y (c) realizar las acciones necesarias para la correcta ejecuci√≥n de la promoci√≥n.</p>

                                        <h4 className="font-bold text-white mt-2">8. Autorizaci√≥n</h4>
                                        <p>Los participantes autorizan a BURGERBOY y CALAVERA, quienes podr√°n delegar dicha autorizaci√≥n, a difundir y comunicar las fotograf√≠as, videos e im√°genes generadas como parte de la din√°mica de la promoci√≥n, con fines comerciales y/o publicitarios, en los medios de difusi√≥n que las Marcas estimen convenientes, sin que ello genere derecho a compensaci√≥n alguna.</p>

                                    </div>
                                    <div className="mt-4 flex justify-center">
                                        <button onClick={() => setShowTerms(false)} className="bg-white text-black font-road-rage text-3xl px-8 py-1 hover:bg-gray-200">OK</button>
                                    </div>
                                </div>
                            </div>
                        )}
                    </div>
                );
            }

            // 3. MARRIAGE FORM
            if (step === 3) {
                return (
                    <div className="h-[100dvh] w-full bg-white flex flex-col font-oswald overflow-hidden">
                        <div className="h-full flex flex-col items-center px-6 py-4 animate-[slideInFromRight_0.5s_ease-out]">
                            <div className="flex-none flex flex-col items-center mb-4 w-full max-w-xs pt-4">
                                <img src={ASSETS.isotipo} alt="Icon" className="w-12 mb-1" />
                                <div className="w-28">
                                    <img src={ASSETS.logoTexto} alt="Logo" className="w-full opacity-90" />
                                </div>
                            </div>

                            <div className="flex-1 w-full max-w-sm flex flex-col justify-center min-h-0">
                                <form onSubmit={submitMarriage} className="w-full space-y-4 flex flex-col items-center">
                                    <div className="w-full space-y-1 text-center">
                                        <label className="font-road-rage text-2xl">C√≥nyuge 1</label>
                                        <input required type="text" value={couple.p1} onChange={e => setCouple({...couple, p1: e.target.value})} className="w-full bg-black text-white p-2 text-xl text-center border-2 border-black focus:outline-none rounded-none" />
                                    </div>
                                    <div className="w-full space-y-1 text-center">
                                        <label className="font-road-rage text-2xl">C√≥nyuge 2</label>
                                        <input required type="text" value={couple.p2} onChange={e => setCouple({...couple, p2: e.target.value})} className="w-full bg-black text-white p-2 text-xl text-center border-2 border-black focus:outline-none rounded-none" />
                                    </div>
                                    <h3 className="font-road-rage text-2xl text-center leading-tight pt-2 px-2">¬øAceptan soportarse hasta que la digesti√≥n los separe?</h3>
                                    <button type="submit" className="w-full bg-black text-white flex items-center justify-center space-x-2 py-3 mt-2 hover:scale-105 transition-transform shadow-xl">
                                        <span className="font-road-rage text-3xl pt-1">S√ç, ACEPTAMOS</span>
                                        <ChevronUp className="rotate-90" size={24} />
                                    </button>
                                    <span className="font-bold text-xs opacity-60">(TOMAR FOTO)</span>
                                </form>
                            </div>
                            <div className="flex-none w-full max-w-xs pb-2 flex flex-col items-center">
                                <img src={ASSETS.logosFooter} alt="Logos" className="w-full" />
                                <PoweredBy />
                            </div>
                        </div>
                    </div>
                );
            }

            // 4. CAMERA VIEW
            if (step === 4) {
                return (
                    <div className="h-[100dvh] w-full bg-black relative overflow-hidden flex flex-col">
                        <video ref={videoRef} autoPlay playsInline className="absolute inset-0 w-full h-full object-cover scale-x-[-1] filter saturate-[0.5] contrast-[1.1]" onLoadedMetadata={() => videoRef.current && videoRef.current.play()} />
                        <img src={ASSETS.grunge} className="absolute inset-0 w-full h-full object-cover pointer-events-none z-10 opacity-50 mix-blend-multiply invert" />
                        <div className="absolute inset-0 pointer-events-none z-20 flex flex-col justify-between">
                            <img src={ASSETS.overlay} className="w-full h-full object-contain opacity-90 mix-blend-hard-light" alt="Overlay" />
                        </div>
                        <div className="absolute top-[30%] w-full text-center z-30 pointer-events-none px-4">
                            <h2 className="font-road-rage text-white text-5xl md:text-7xl drop-shadow-none tracking-wide">{couple.p1} Y {couple.p2}</h2>
                        </div>
                        <div className="absolute bottom-12 w-full flex justify-center z-50">
                            <button onClick={handleCapture} className="w-20 h-20 rounded-full bg-white border-4 border-gray-300 shadow-[0_0_20px_rgba(255,255,255,0.5)] active:scale-90 transition-transform flex items-center justify-center">
                                <div className="w-16 h-16 rounded-full bg-white border-2 border-black" />
                            </button>
                        </div>
                        <canvas ref={canvasRef} className="hidden" />
                    </div>
                );
            }

            // 5. RESULT VIEW
            if (step === 5) {
                return (
                    <div className="h-[100dvh] w-full bg-gray-900 relative flex flex-col items-center justify-center">
                        <div className="relative w-full h-full max-w-md mx-auto bg-black shadow-2xl overflow-hidden flex flex-col">
                            <div className="relative flex-1 bg-black flex items-center justify-center">
                                {capturedImage && <img src={capturedImage} alt="Captured" className="max-w-full max-h-full object-contain" />}
                            </div>
                            <div className="absolute inset-0 flex flex-col items-center justify-center bg-black/40 z-20 space-y-4 p-6">
                                <div className="w-full space-y-4 animate-[zoomIn_0.5s_ease-out] mt-20">
                                    <button onClick={shareOrDownloadPhoto} disabled={isSharing} className="w-full bg-white hover:bg-gray-100 text-black p-4 shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] transform hover:-translate-y-1 transition-all border-2 border-black">
                                        <div className="font-road-rage text-4xl md:text-5xl leading-none flex items-center justify-center gap-2">
                                            {isSharing ? 'GUARDANDO...' : 'GUARDAR / COMPARTIR'} <ShareIcon size={32} />
                                        </div>
                                    </button>
                                    <button onClick={repeatPhoto} className="w-full bg-white hover:bg-gray-100 text-black p-4 shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] transform hover:-translate-y-1 transition-all border-2 border-black">
                                        <div className="font-road-rage text-4xl md:text-5xl leading-none flex items-center justify-center gap-2">
                                            REPITE LA FOTO <RefreshCcw size={32} />
                                        </div>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            }

            return null;
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
